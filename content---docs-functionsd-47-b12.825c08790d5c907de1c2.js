(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{177:function(n,e,t){"use strict";t.r(e),t.d(e,"frontMatter",(function(){return a})),t.d(e,"rightToc",(function(){return o})),t.d(e,"default",(function(){return s}));t(58),t(31),t(21),t(22),t(59),t(0);var c=t(217);function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(n[c]=t[c])}return n}).apply(this,arguments)}var a={id:"functions",title:"Functions",sidebar_label:"Functions"},o=[{value:"This",id:"this",children:[]},{value:"Calling JS Functions",id:"calling-js-functions",children:[]},{value:"Constructing JS Functions",id:"constructing-js-functions",children:[]},{value:"Returning Functions",id:"returning-functions",children:[]}],i={rightToc:o},u="wrapper";function s(n){var e=n.components,t=function(n,e){if(null==n)return{};var t,c,r={},a=Object.keys(n);for(c=0;c<a.length;c++)t=a[c],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,["components"]);return Object(c.b)(u,r({},i,t,{components:e,mdxType:"MDXLayout"}),Object(c.b)("p",null,Object(c.b)("a",r({parentName:"p"},{href:"https://github.com/neon-bindings/examples/tree/master/functions"}),"Examples")),Object(c.b)("h2",{id:"this"},"This"),Object(c.b)("p",null,"In order to call methods on ",Object(c.b)("inlineCode",{parentName:"p"},"cx.this"),", it must be downcasted to a ",Object(c.b)("inlineCode",{parentName:"p"},"JsObject"),". For more on ",Object(c.b)("a",r({parentName:"p"},{href:"/docs/type-checking#downcasting"}),"type checking section")," for more details"),Object(c.b)("pre",null,Object(c.b)("code",r({parentName:"pre"},{className:"language-rust"}),'pub fn require_object_this(mut cx: FunctionContext) -> JsResult<JsUndefined> {\n    let this = cx.this();\n    // Downcast `this` so .set can be called on it\n    let this = this.downcast::<JsObject>().or_throw(&mut cx)?;\n    let t = cx.boolean(true);\n    // Equivalent to  `this.modified = true` in JS\n    this.set(&mut cx, "modified", t)?;\n    Ok(cx.undefined())\n}\n')),Object(c.b)("h2",{id:"calling-js-functions"},"Calling JS Functions"),Object(c.b)("p",null,"Here we define a JS function that takes a function as the ",Object(c.b)("inlineCode",{parentName:"p"},"0"),"th argument and call's that function. ",Object(c.b)("inlineCode",{parentName:"p"},"f.call")," takes a ",Object(c.b)("inlineCode",{parentName:"p"},"FunctionContext"),", the context to call the function from (in this case ",Object(c.b)("inlineCode",{parentName:"p"},"null"),"), and ",Object(c.b)("inlineCode",{parentName:"p"},"arguments")),Object(c.b)("pre",null,Object(c.b)("code",r({parentName:"pre"},{className:"language-rust"}),"pub fn call_js_function(mut cx: FunctionContext) -> JsResult<JsNumber> {\n    let f = cx.argument::<JsFunction>(0)?;\n    let args: Vec<Handle<JsNumber>> = vec![cx.number(16.0)];\n    let null = cx.null();\n    f.call(&mut cx, null, args)?.downcast::<JsNumber>().or_throw(&mut cx)\n}\n")),Object(c.b)("h2",{id:"constructing-js-functions"},"Constructing JS Functions"),Object(c.b)("pre",null,Object(c.b)("code",r({parentName:"pre"},{className:"language-rust"}),'pub fn construct_js_function(mut cx: FunctionContext) -> JsResult<JsNumber> {\n    let f = cx.argument::<JsFunction>(0)?;\n    let zero = cx.number(0.0);\n    let o = f.construct(&mut cx, vec![zero])?;\n    let get_utc_full_year_method = o.get(&mut cx, "getUTCFullYear")?.downcast::<JsFunction>().or_throw(&mut cx)?;\n    let args: Vec<Handle<JsValue>> = vec![];\n    get_utc_full_year_method.call(&mut cx, o.upcast::<JsValue>(), args)?.downcast::<JsNumber>().or_throw(&mut cx)\n}\n')),Object(c.b)("h2",{id:"returning-functions"},"Returning Functions"),Object(c.b)("pre",null,Object(c.b)("code",r({parentName:"pre"},{className:"language-rust"}),"pub fn return_js_function(mut cx: FunctionContext) -> JsResult<JsFunction> {\n    JsFunction::new(&mut cx, add1)\n}\n")))}s.isMDXComponent=!0},217:function(n,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return p}));var c=t(0),r=t.n(c),a=r.a.createContext({}),o=function(n){var e=r.a.useContext(a),t=e;return n&&(t="function"==typeof n?n(e):Object.assign({},e,n)),t},i=function(n){var e=o(n.components);return r.a.createElement(a.Provider,{value:e},n.children)};var u="mdxType",s={inlineCode:"code",wrapper:function(n){var e=n.children;return r.a.createElement(r.a.Fragment,{},e)}},l=Object(c.forwardRef)((function(n,e){var t=n.components,c=n.mdxType,a=n.originalType,i=n.parentName,u=function(n,e){var t={};for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&-1===e.indexOf(c)&&(t[c]=n[c]);return t}(n,["components","mdxType","originalType","parentName"]),l=o(t),p=c,b=l[i+"."+p]||l[p]||s[p]||a;return t?r.a.createElement(b,Object.assign({},{ref:e},u,{components:t})):r.a.createElement(b,Object.assign({},{ref:e},u))}));function p(n,e){var t=arguments,c=e&&e.mdxType;if("string"==typeof n||c){var a=t.length,o=new Array(a);o[0]=l;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=n,i[u]="string"==typeof n?n:c,o[1]=i;for(var p=2;p<a;p++)o[p]=t[p];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}l.displayName="MDXCreateElement"}}]);