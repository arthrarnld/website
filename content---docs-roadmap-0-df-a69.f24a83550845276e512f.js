(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return c}));n(58),n(31),n(21),n(22),n(59),n(0);var a=n(217);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o={id:"roadmap",title:"Roadmap",sidebar_label:"Roadmap"},i=[{value:"N-API",id:"n-api",children:[]},{value:"Cross Compilation Flags",id:"cross-compilation-flags",children:[]},{value:"JS Standard Library Integration",id:"js-standard-library-integration",children:[]},{value:"Threadsafe Callbacks on Main Thread",id:"threadsafe-callbacks-on-main-thread",children:[]}],l={rightToc:i},s="wrapper";function c(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(s,r({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"To see what's in progress, see ",Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/neon-bindings/rfcs/pulls"}),"our RFC's")),Object(a.b)("h2",{id:"n-api"},"N-API"),Object(a.b)("h4",{id:"what-is-n-napi"},"What is ",Object(a.b)("a",r({parentName:"h4"},{href:"https://nodejs.org/api/n-api.html"}),"N-NAPI"),"?"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"It is independent from the underlying JavaScript runtime (ex V8) and is maintained as part of Node.js itself. This API will be Application Binary Interface (ABI) stable across versions of Node.js. It is intended to insulate Addons from changes in the underlying JavaScript engine and allow modules compiled for one major version to run on later major versions of Node.js without recompilation")),Object(a.b)("p",null,"See ",Object(a.b)("a",r({parentName:"p"},{href:"https://nodejs.org/api/n-api.html"}),"nodejs.org/api/n-api")," for more details"),Object(a.b)("p",null,"Currently Neon uses the ",Object(a.b)("inlineCode",{parentName:"p"},"v8")," API for all JS interaction with the JS runtime. Migrating to N-API would give us the following:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"ABI stability"),Object(a.b)("li",{parentName:"ul"},"Remove dependency on ",Object(a.b)("inlineCode",{parentName:"li"},"node-gyp"))),Object(a.b)("h2",{id:"cross-compilation-flags"},"Cross Compilation Flags"),Object(a.b)("p",null,"Currently, Neon only supports building for the host target. We are looking to add support for compiling to multiple targets, similar to how Cargo lets you do this:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-bash"}),"# Cargo\ncargo build --target i686-pc-windows-msvc\n# Neon\nneon build --target i686-pc-windows-msvc\n")),Object(a.b)("p",null,"See the ",Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/neon-bindings/rfcs/issues/16"}),"issue ticket")),Object(a.b)("h2",{id:"js-standard-library-integration"},"JS Standard Library Integration"),Object(a.b)("p",null,"This includes supporting more erganomic Neon APIs for JS APIs. One of these API's, for example, is the ",Object(a.b)("inlineCode",{parentName:"p"},"Date")," API. While it is possible to use the JS ",Object(a.b)("inlineCode",{parentName:"p"},"Date")," object in Neon, the methods for using it low level. We plan to add a higher level API for the ",Object(a.b)("inlineCode",{parentName:"p"},"Date")," object and other basic standard library objects in JS including the following: ",Object(a.b)("inlineCode",{parentName:"p"},"RegEx"),", ",Object(a.b)("inlineCode",{parentName:"p"},"TypedArray"),", ",Object(a.b)("inlineCode",{parentName:"p"},"Promise"),", and other objects."),Object(a.b)("p",null,"Here's an example of how you could instantiate a JS ",Object(a.b)("inlineCode",{parentName:"p"},"Date")," object in Neon with the higher level API:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-rust"}),"let date: Handle<JsDate> = JsDate::now(scope)?;\nlet time: SystemTime = date.as_time();\n")),Object(a.b)("p",null,"To learn more, see these RFC's:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",r({parentName:"li"},{href:"https://github.com/neon-bindings/rfcs/blob/26f10abccf49dd880449f043868b0968b137096a/text/0000-date-api.md"}),"Date API")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",r({parentName:"li"},{href:"https://github.com/neon-bindings/rfcs/issues/10"}),"stdlib API"))),Object(a.b)("h2",{id:"threadsafe-callbacks-on-main-thread"},"Threadsafe Callbacks on Main Thread"),Object(a.b)("p",null,"The main motivation of this is to provide a way to schedule the execution of JavaScript from any (Rust) thread. While ",Object(a.b)("inlineCode",{parentName:"p"},"neon::Task")," allows to perform a background task and call a JavaScript callback after it's completion, there is currently no way to propagate the progress of a task to JavaScript."),Object(a.b)("p",null,Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/geovie/rfcs/blob/0f1963c1010253408229f5d0d3ee0cc7049765fa/text/0000-threadsafe-callback.md"}),"See the RFC")," for more details"))}c.isMDXComponent=!0},217:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a),o=r.a.createContext({}),i=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=i(e.components);return r.a.createElement(o.Provider,{value:t},e.children)};var s="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),p=i(n),b=a,d=p[l+"."+b]||p[b]||c[b]||o;return n?r.a.createElement(d,Object.assign({},{ref:t},s,{components:n})):r.a.createElement(d,Object.assign({},{ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[s]="string"==typeof e?e:a,i[1]=l;for(var b=2;b<o;b++)i[b]=n[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);